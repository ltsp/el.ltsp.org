Το ακόλουθο άρθρο περιγράφει την περίπτωση σε μια σχολική μονάδα να
υπάρχουν πολλά εργαστήρια που ανήκουν στο ίδιο υποδίκτυο και το πως
μπορείτε να διαχωρίσετε τα εργαστήρια αυτά.
Διακρίνονται οι περιπτώσεις που διαθέτετε μόνο έναν εξυπηρετητή LTSP για
όλα τα εργαστήρια ή περισσότερους τους ενός εξυπηρετητές LTSP.

## Ένας εξυπηρετητής LTSP

Σε αυτήν την περίπτωση το μόνο πρόβλημα είναι ότι η εφαρμογή ++"Επόπτης (Epoptes)"++
αναγνωρίζει όλους τους σταθμούς εργασίας όλων των
εργαστηριών. Έτσι προτείνεται να δημιουργηθούν στον Επόπτη
μια ομάδα για κάθε εργαστήριο, σύμφωνα με τις οδηγίες που βρίσκονται
στο [Δημιουργία τάξης](../../epoptes/Δημιουργία_τάξης.md).

## Πολλοί εξυπηρετητές LTSP

Σε αυτή την περίπτωση οι σταθμοί εργασίας μπορεί να συνδεθούν σε
οποιοδήποτε εξυπηρετητή κατά τη δικτυακή τους εκκίνηση. Έτσι
μπορεί να φαίνονται στον Επόπτη του άλλου εργαστηρίου, ή να ισχύουν
οι λογαριασμοί του άλλου εργαστηρίου κλπ. Η λύση είναι να οριστεί σε
κάθε εξυπηρετητή ποιοι σταθμοί εργασίας θα ξεκινούν από αυτόν,
δηλώνοντας στην υπηρεσία ++"dnsmasq"++ τις διευθύνσεις MAC των
αντίστοιχων σταθμών εργασίας.

Για να δημιουργήσετε τα κατάλληλα αρχεία ρυθμίσεων θα πρέπει να
ακολουθήσετε τα παρακάτω βήματα (ορίζετε ποιοι Η/Υ ++"MAC
addresses"++ ανήκουν στο κάθε εργαστήριο και ενημερώνετε το dnsmasq να
αγνοεί τις αιτήσεις των υπολοίπων Η/Υ):

  - Πηγαίνετε σε έναν από τους εξυπηρετητές.
  - Εκκινήστε μόνο τους σταθμούς εργασίας που επιθυμείτε να ελέγχονται
    από το συγκεκριμένο εξυπηρετητή.
  - Δώστε τις παρακάτω εντολές, για να δημιουργήσετε και να ανοίξετε τα
    κατάλληλα αρχεία ρυθμίσεων:

    ```shell-session
    $ cd /etc/dnsmasq.d/
    $ sudo mkdir dhcp-hosts
    $ sudo pluma dhcp-hosts.conf dhcp-hosts/lab1.conf
    ```

    Θα ανοίξει ο κειμενογράφος με δύο αρχεία. Στο αρχείο `dhcp-hosts.conf`
    βάλτε μόνο τις παρακάτω γραμμές:

    ```title="dhcp-hosts.conf"
    dhcp-hostsfile=/etc/dnsmasq.d/dhcp-hosts
    dhcp-ignore=tag:!lab1
    ```

    Στο αρχείο `dhcp-hosts/lab1.conf` βάλτε για όλους τους σταθμούς εργασίας
    γραμμές με τη ++"MAC address"++, το ++"εργαστήριο"++ και το ++"hostname"++ τους:

    ```title="dhcp-hosts/lab1.conf"
    08:00:27:29:13:01,set:lab1,pc01
    08:00:27:29:13:02,set:lab1,pc02
    ```

    Τις MAC addresses μπορείτε να τις δείτε από την εφαρμογή ++"Επόπτης (Epoptes)"++
    κάνοντας ++"δεξί κλικ"++▸++"Ιδιότητες"++ σε κάθε σταθμό.
    
  - Επανεκκινήστε την υπηρεσία dnsmasq με την εντολή:

    ```shell
    sudo systemctl restart dnsmasq
    ```

Στη συνέχεια στα υπόλοιπα εργαστήρια ακολουθήστε τις ίδιες οδηγίες, αλλά
όπου βλέπετε `lab1`, βάλτε `lab2`, `lab3` κλπ.
